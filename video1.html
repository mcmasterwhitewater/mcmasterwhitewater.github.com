---
layout: page
title: Video
is_page: true
---
<link   href="js/jquery.fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css"/>
<script src="js/jquery.fancybox/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script>
<script src="js/jcarousellite_1.0.1.pack.js" type="text/javascript"></script>
<style>
.carousele_next {
float:left;
position:relative;
}
.carousele_previous{
float:left;
position:relative;
}
.clear{
clear:both;
}
.carousele_strip{
float:left;
position:relative;
}
.carausele_img{
padding:0px 0px 0px 10px;
}
carausele_img_text{
text-align: center;display:inline-block;width:120px;
}
</style>

<div id="videoPlaylists">
</div>

<script>
  function showVideo( uri){    
    $.fancybox({
	  
	  'showCloseButton'     : false,
      'padding'             : 0,
      'autoScale'           : false,
      'transitionIn'        : 'none',
      'transitionOut'       : 'none',
      //'title'               : title,
      'width'               : 680,
      'height'              : 495,
      'href'                : uri,
      'type'                : 'swf',    
      'swf'                 : {'allowfullscreen':'true'} // <-- flashvars here
     });
  }
	
  function onPlayListLoaded(playListJsonData, playListId, playListTitle, updated){    
		  var videoThumbHtml = '';
		  for(var j=0, videos=playListJsonData.feed.entry, numOfVideos = videos.length;j<numOfVideos;j++){
		    var video=videos[j];
		    var videoTitle = video.title.$t;
			var thumbNail = video.media$group.media$thumbnail[0];
			var videoId = video.media$group.yt$videoid.$t;			
			var videoUrl = "http://www.youtube.com/v/"+videoId;
			
			videoThumbHtml = videoThumbHtml + '<li><a href="#" onclick="showVideo(\''+videoUrl+'\')"><div><img src="'+thumbNail.url+'" height="'+thumbNail.height+'" width="'+thumbNail.width+'" class="carausele_img"/><br/><span class="carausele_img_text" style="text-align: center;display:inline-block;width:'+thumbNail.width+'px;">'+videoTitle+'</span></div></a></li>';
			
		  }	
          $('#videoPlaylists').append($('<span>'+playListTitle+"(last updated: "+updated+")"+'</span><div><button id="prev'+playListId+'" class="carousele_previous">&lt;&lt;</button><div id="carousele'+playListId+'" class="carousele_strip"><ul>'+videoThumbHtml+'</ul><button class="carousele_next" id="next'+playListId+'">&gt;&gt;</button></div></div><div class="clear"></div>'));		  
		 
		  $("#carousele"+playListId).jCarouselLite({
             btnNext: "#next"+playListId,
             btnPrev: "#prev"+playListId
			 
          });
		  
		  
		}	
//load playlists
$.ajax({
  url: "https://gdata.youtube.com/feeds/api/users/mcmasterwhitewater/playlists?v=2&orderby=updated&alt=json-in-script&fields=entry(title,yt:playlistId,updated)",
  dataType: 'jsonp',
  success: function(playListsJsonData){    
    for(var i=0, playLists=playListsJsonData.feed.entry, numOfPlayLists = playLists.length;i<numOfPlayLists;i++){
	  var playList = playLists[i];
	  var playListTitle = playList.title.$t;
	  var playListId=playList.yt$playlistId.$t;
	  
	  var playListKeyData = {
	    plId: playListId,
		plTitle: playListTitle,
		updated: parseISO8601DateInLocalTZ(playList.updated.$t),
		handler: function(playListJsonData){		  
		  onPlayListLoaded(playListJsonData, this.plId, this.plTitle, this.updated);
		}
	  }
	  
	  $.ajax({
	    url: "http://gdata.youtube.com/feeds/api/playlists/"+playListId+"?v=2&orderby=published&fields=entry(title,media:group(media:thumbnail,yt:videoid))&alt=json-in-script",
		dataType: 'jsonp',
		success: $.proxy(playListKeyData.handler, playListKeyData)
	   });
	  
	}
  }
});			

</script>